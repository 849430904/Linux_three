<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>
	字符集和编码II: fat/msdos/vfat | I remember a meadow one morning in May	</title>
		<link rel="stylesheet" type="text/css" media="all" href="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/style.css">
	<link rel="pingback" href="http://gosubi.me/adow/xmlrpc.php">
	<link rel="alternate" type="application/rss+xml" title="I remember a meadow one morning in May » Feed" href="http://gosubi.me/adow/feed/">
<link rel="alternate" type="application/rss+xml" title="I remember a meadow one morning in May » 评论 Feed" href="http://gosubi.me/adow/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="I remember a meadow one morning in May » 字符集和编码II: fat/msdos/vfat 评论 Feed" href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/feed/">
<link rel="stylesheet" id="wp-recentcomments-css" href="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/wp-recentcomments.css" type="text/css" media="screen">
<link rel="stylesheet" id="wp-pagenavi-css" href="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/pagenavi-css.css" type="text/css" media="all">
<script src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/ga.js" async="" type="text/javascript"></script><script type="text/javascript" src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/comment-reply.js"></script><script type="text/javascript" src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/floating-frame.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://gosubi.me/adow/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://gosubi.me/adow/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="字符集和编码 I：formalization" href="http://gosubi.me/adow/2008/08/charset-coding-1-formalizaion/">
<link rel="next" title="字符集和编码III: tricky cifs" href="http://gosubi.me/adow/2008/08/charset-coding-3-cifs/">
<link rel="canonical" href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/">
<link rel="shortlink" href="http://gosubi.me/adow/?p=75">

	<!-- Generated by Link Indication Plugin 4.4 - http://sw-guide.de/ -->
	<style type="text/css" media="screen">
		@import url( http://gosubi.me/adow/wp-content/plugins/link-indication/link-indication_style.css );
	</style>
	<!-- /Link Indication Plugin -->
	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22265108-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuTitle {background-color: #CCCCCC; margin: -1px -1px 1px -1px; text-align: center; font-style: italic; font-size: 80%; color: #444444; padding: 2px 0; overflow: hidden}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style>@media print{#ep6yv526k2g{display:none}}</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; border: 0; padding: 0; margin: 0}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0 !important; padding: 0 !important; margin: 0 !important; vertical-align: 0 !important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap ! important}
.MathJax img {display: inline ! important; float: none ! important}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block; overflow: hidden; width: 1px; height: 60ex}
.MathJax .MathJax_EmBox {display: block; overflow: hidden; width: 1px; height: 60em}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Main; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf') format('opentype'); font-weight: bold}
@font-face {font-family: MathJax_Main; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Math; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Caligraphic; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">@font-face {font-family: MathJax_AMS; src: url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff') format('woff'), url('https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf') format('opentype')}
</style></head>
<body class="single single-post postid-75 single-format-standard"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px none; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div style="display: none;" id="MathJax_Message"></div>
<div id="nav">
	<div id="menus">
		<ul><li><a href="http://gosubi.me/adow/">首页</a></li></ul>
		<ul id="menu-my_menu" class="menu"><li id="menu-item-217" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-217"><a href="http://gosubi.me/adow/mplayer-wrapper/">mplayer</a>
<ul class="sub-menu">
	<li id="menu-item-219" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-219"><a href="http://gosubi.me/adow/mplayer-wrapper/python-version/">python version</a></li>
	<li id="menu-item-220" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-220"><a href="http://gosubi.me/adow/mplayer-wrapper/bash-version/">bash version</a></li>
</ul>
</li>
<li id="menu-item-160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-160"><a href="http://gosubi.me/adow/about/">关于</a></li>
</ul>	</div>
	<div id="search">
		<form id="searchform" method="get" action="http://gosubi.me/adow/">
<input value="站内搜索" onfocus="if (this.value == '站内搜索') {this.value = '';}" onblur="if (this.value == '') {this.value = '站内搜索';}" size="35" maxlength="50" name="s" id="s" type="text">
<input id="searchsubmit" value="搜索" type="submit">
</form>	</div>
</div>
<div id="wrapper">
	<div id="header">		<h1><a href="http://gosubi.me/adow/">I remember a meadow one morning in May</a></h1>
		<h2>With a sky full of dreams that sailed in that day</h2>
		<div class="clear"></div>
			</div>
<div id="content">
		<div class="post-75 post type-post status-publish format-standard hentry category-floss tag-i18n post-single" id="post-75"><!-- post div -->
		<h2 class="title">字符集和编码II: fat/msdos/vfat</h2>
		<div class="post-info-top">
			<span class="post-info-date">
				作者: <a href="http://gosubi.me/adow/author/subi/" title="查看 subi 的所有文章" rel="author">subi</a>
				日期:				2008-08-05							</span>
						<span class="addcomment"><a href="#respond" rel="nofollow" title="发表评论？">发表评论</a> (6)</span>
			<span class="gotocomments"><a href="#comments" rel="nofollow" title="查看评论？">查看评论</a></span>
					</div>
		<div class="clear"></div>
		<div class="entry">
			<p>具体到文件名乱码的问题，需要明确两点
</p><ol>
<li>第一，文件名作为一个字符串，需要被编码后存入文件系统；</li>
<li>第二，Linux内核无非是个特殊的应用程序，它读取文件名，再把文件名以编码后的形式传递出去。</li>
</ol>
<p>但Linux内核只能逐字节处理编码流（而Windows NT内核是UCS-2的，逐2字节处理编码流），因此必须采用某种单字节编码（这包括所有的不定长编码）进行输出——这就是Linux内核所谓的<acronym title="Native Language Support">NLS</acronym>，对应于Windows的codepage。</p>
<p>在对文件名的处理上，fat和vfat的区别在于：fat/msdos只支持短文件名（8.3命名法），而vfat加入了对长文件名和UNICODE的支持。</p>
<p>为了保持与fat的兼容性，在vfat中，每个文件同时拥有“长”文件名和短文件名，其中短文件名不区分大小写（实际上是不允许小写字母出现在文件
名中）。可以这么理解，对于vfat，“长文件名”是文件真正的名字，“短文件名”则是提供兼容性的名字。举例来说，文件“真名”为abc.txt，它的
短文件名是ABC.TXT；文件“真名”为alongname.txt，它的短文件名则是ALONGN~1.TXT。</p>
<p>无论是fat还是vfat，<strong>短文件名按codepage编码存储，长文件名按UNICODE编码存储</strong>。因此，如果文件的真名（也就是长文件名）是<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-1-Frame" class="MathJax"><nobr><span id="MathJax-Span-1" class="math"><span style="display: inline-block; position: relative; width: 8px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span id="MathJax-Span-2" class="mrow"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-3" class="mi">s</span></span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.719em; vertical-align: -0.089em;"></span></span></nobr></span><script id="MathJax-Element-1" type="math/tex">s</script>，短文件名是<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-2-Frame" class="MathJax"><nobr><span id="MathJax-Span-4" class="math"><span style="display: inline-block; position: relative; width: 12px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(0.041em, 1000em, 1.179em, -0.501em); top: -0.985em; left: 0em;"><span id="MathJax-Span-5" class="mrow"><span id="MathJax-Span-6" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-7" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.148em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-8" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.985em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.115em; vertical-align: -0.089em;"></span></span></nobr></span><script id="MathJax-Element-2" type="math/tex">s’</script>，则它们在文件系统中分别被存储为<span class="MathJax_Preview"></span><div style="text-align: center;" aria-readonly="true" role="textbox" class="MathJax_Display"><span style="" id="MathJax-Element-3-Frame" class="MathJax"><nobr><span id="MathJax-Span-9" class="math"><span style="display: inline-block; position: relative; width: 76px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.304em, 1000em, 2.873em, -0.501em); top: -2.338em; left: 0em;"><span id="MathJax-Span-10" class="mrow"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-11" class="mi">s</span><span style="font-family: MathJax_Main;" id="MathJax-Span-12" class="mo">,</span><span style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;" id="MathJax-Span-13" class="mspace"></span><span style="padding-left: 0.167em;" id="MathJax-Span-14" class="msubsup"><span style="display: inline-block; position: relative; width: 1.737em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-15" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -1.531em; left: 0.615em;"><span id="MathJax-Span-16" class="texatom"><span id="MathJax-Span-17" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-18" class="mi">e</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-19" class="mi">n</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-20" class="mi">c</span></span></span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span><span id="MathJax-Span-21" class="mfenced"><span style="vertical-align: 0em;" id="MathJax-Span-27" class="mo"><span style="font-family: MathJax_Size1;">(</span></span><span id="MathJax-Span-23" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-24" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.198em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-25" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span><span style="vertical-align: 0em;" id="MathJax-Span-28" class="mo"><span style="font-family: MathJax_Size1;">)</span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span></span><span style="font-family: MathJax_Main;" id="MathJax-Span-29" class="mo">.</span></span><span style="display: inline-block; width: 0px; height: 2.338em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.653em; vertical-align: -0.514em;"></span></span></nobr></span></div><script id="MathJax-Element-3" type="math/tex; mode=display">s,\,\varphi_{enc} \left( s' \right).</script></p>
<p>为了访问fat/vfat文件系统，我们需要用内核的msdos或vfat模块。它们有三个跟字符集有关的内核参数：codepage，iocharset，utf8。我们来确定它们对应着什么样的编码或解码函数。</p>
<ul>
<li>codepage=enc：用来转换短文件名中字节码为128~255的代码页。这一选项指定的是短文件名的解码函数<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-4-Frame" class="MathJax"><nobr><span id="MathJax-Span-30" class="math"><span style="display: inline-block; position: relative; width: 28px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(-0.015em, 1000em, 1.387em, -0.504em); top: -0.985em; left: 0em;"><span id="MathJax-Span-31" class="mrow"><span id="MathJax-Span-32" class="msubsup"><span style="display: inline-block; position: relative; width: 1.737em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-33" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; clip: rect(1.129em, 1000em, 1.969em, -0.494em); top: -2.129em; left: 0.615em;"><span id="MathJax-Span-34" class="texatom"><span id="MathJax-Span-35" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-36" class="mo">−</span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-37" class="mn">1</span></span></span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span><span style="position: absolute; clip: rect(1.287em, 1000em, 1.977em, -0.526em); top: -1.637em; left: 0.615em;"><span id="MathJax-Span-38" class="texatom"><span id="MathJax-Span-39" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-40" class="mi">e</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-41" class="mi">n</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-42" class="mi">c</span></span></span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.985em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.446em; vertical-align: -0.349em;"></span></span></nobr></span><script id="MathJax-Element-4" type="math/tex"> \varphi_{enc}^{-1} </script>（因为短文件名被codepage编码了），解码的结果是短文件名被用unicode表示；</li>
<li>iocharset=enc：用来转换长文件名和解码后的短文件名。也就是说，这一选项指定编码函数<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-5-Frame" class="MathJax"><nobr><span id="MathJax-Span-43" class="math"><span style="display: inline-block; position: relative; width: 28px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(0.358em, 1000em, 1.43em, -0.504em); top: -0.985em; left: 0em;"><span id="MathJax-Span-44" class="mrow"><span id="MathJax-Span-45" class="msubsup"><span style="display: inline-block; position: relative; width: 1.737em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-46" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -1.531em; left: 0.615em;"><span id="MathJax-Span-47" class="texatom"><span id="MathJax-Span-48" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-49" class="mi">e</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-50" class="mi">n</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-51" class="mi">c</span></span></span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.985em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.033em; vertical-align: -0.403em;"></span></span></nobr></span><script id="MathJax-Element-5" type="math/tex">\varphi_{enc}</script>，使得内核最终的输出是经过<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-6-Frame" class="MathJax"><nobr><span id="MathJax-Span-52" class="math"><span style="display: inline-block; position: relative; width: 28px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(0.358em, 1000em, 1.43em, -0.504em); top: -0.985em; left: 0em;"><span id="MathJax-Span-53" class="mrow"><span id="MathJax-Span-54" class="msubsup"><span style="display: inline-block; position: relative; width: 1.737em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-55" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -1.531em; left: 0.615em;"><span id="MathJax-Span-56" class="texatom"><span id="MathJax-Span-57" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-58" class="mi">e</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-59" class="mi">n</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-60" class="mi">c</span></span></span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.985em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.033em; vertical-align: -0.403em;"></span></span></nobr></span><script id="MathJax-Element-6" type="math/tex">\varphi_{enc}</script>编码的；</li>
<li>utf8：几乎等于iocharset=utf8</li>
</ul>
<p>这样，参数有如下的具体选择：</p>
<ul>
<li>codepage：这一选项只跟短文件名有关。短文件名可以通过mount -t msdos看到，也可以用windows命令行看到。不在乎短文件名的同学，这个选项完全无所谓；在乎短文件名并且使用简体中文的同学，请写
<pre>codepage=936</pre>
</li>
<li>iocharset：分情况讨论。
<ul>
<li>若locale不是utf8，则选择相应的locale，比如GB系就应该选
<pre>iocharset=cp936</pre>
</li>
<li>若locale是utf8的，可以选择
<pre>iocharset=utf8</pre>
<p>但这样做的缺点是会导致vfat模块将允许短文件名使用小写字母，这与windows是不兼容的（使用iocharset=utf8时，内核会出一条警告信息的——这比较没道理，估计是个历史遗留问题）；</p>
</li>
</ul>
</li>
<li>utf8：一个解决办法是使用utf8参数，只要iocharset!=utf8，vfat就会处理大小写的问题；而utf8参数则会最终处理字
符集的转换。utf8参数只能显式地通过mount调用（不能在编译内核时预先指定，当然也可以写在/etc/fstab里），我的意思是这个选项不能偷
懒不写。</li>
</ul>
<p>最后是结论：</p>
<ol>
<li>codepage=936，这一选项可以在内核默认设置；</li>
<li>本地locale是gb系的，参数应为
<pre>mount -t vfat -o iocharset=cp936</pre>
</li>
<li>本地locale是utf8的，如果能忍受内核每次都要警告，并且不跟windows交互，可以
<pre>mount -t vfat -o iocharset=utf8</pre>
</li>
<li>要是不能忍3或者交互时出现奇怪的问题，那就
<pre>mount -t vfat -o iocharset=cp936,utf8</pre>
<p>实际上只要内核默认的iocharset不是utf8，直接写</p>
<pre>mount -o utf8</pre>
<p>就可以，这里iocharset=xxx的作用仅仅是处理大小写，所以怎么填都没关系。</p>
</li>
</ol>
<p>我们来看一下这些选项究竟做了些什么事情，假设一个FAT文件系统在简体中文的windows上用过，而Linux程序的locale设置为UTF-8，文件名为<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-7-Frame" class="MathJax"><nobr><span id="MathJax-Span-61" class="math"><span style="display: inline-block; position: relative; width: 8px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span id="MathJax-Span-62" class="mrow"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-63" class="mi">s</span></span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.719em; vertical-align: -0.089em;"></span></span></nobr></span><script id="MathJax-Element-7" type="math/tex">s</script>，其短文件名为<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-8-Frame" class="MathJax"><nobr><span id="MathJax-Span-64" class="math"><span style="display: inline-block; position: relative; width: 12px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(0.041em, 1000em, 1.179em, -0.501em); top: -0.985em; left: 0em;"><span id="MathJax-Span-65" class="mrow"><span id="MathJax-Span-66" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-67" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.148em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-68" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.985em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.115em; vertical-align: -0.089em;"></span></span></nobr></span><script id="MathJax-Element-8" type="math/tex">s’</script></p>
<ol>
<li>在文件系统上（也就是在硬盘里），文件名被存为<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-9-Frame" class="MathJax"><nobr><span id="MathJax-Span-69" class="math"><span style="display: inline-block; position: relative; width: 8px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span id="MathJax-Span-70" class="mrow"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-71" class="mi">s</span></span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.719em; vertical-align: -0.089em;"></span></span></nobr></span><script id="MathJax-Element-9" type="math/tex">s</script>，短文件名被存为<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-10-Frame" class="MathJax"><nobr><span id="MathJax-Span-72" class="math"><span style="display: inline-block; position: relative; width: 66px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.181em, 1000em, 2.791em, -0.504em); top: -2.215em; left: 0em;"><span id="MathJax-Span-73" class="mrow"><span id="MathJax-Span-74" class="msubsup"><span style="display: inline-block; position: relative; width: 2.475em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-75" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -1.593em; left: 0.615em;"><span id="MathJax-Span-76" class="texatom"><span id="MathJax-Span-77" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-78" class="mi">c</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-79" class="mi">p</span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-80" class="mn">936</span></span></span><span style="display: inline-block; width: 0px; height: 1.846em;"></span></span></span></span><span id="MathJax-Span-81" class="mfenced"><span style="vertical-align: 0em;" id="MathJax-Span-82" class="mo"><span style="font-family: MathJax_Size1;">(</span></span><span id="MathJax-Span-83" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-84" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.148em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-85" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span><span style="vertical-align: 0em;" id="MathJax-Span-86" class="mo"><span style="font-family: MathJax_Size1;">)</span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.215em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.704em; vertical-align: -0.565em;"></span></span></nobr></span><script id="MathJax-Element-10" type="math/tex">\varphi_{cp936} \left( s’ \right)</script>；</li>
<li>内核通过codepage=936选项，将映射<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-11-Frame" class="MathJax"><nobr><span id="MathJax-Span-87" class="math"><span style="display: inline-block; position: relative; width: 40px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(-0.015em, 1000em, 1.613em, -0.504em); top: -0.985em; left: 0em;"><span id="MathJax-Span-88" class="mrow"><span id="MathJax-Span-89" class="msubsup"><span style="display: inline-block; position: relative; width: 2.475em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-90" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; clip: rect(1.129em, 1000em, 1.969em, -0.494em); top: -2.129em; left: 0.615em;"><span id="MathJax-Span-91" class="texatom"><span id="MathJax-Span-92" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-93" class="mo">−</span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-94" class="mn">1</span></span></span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span><span style="position: absolute; clip: rect(1.191em, 1000em, 2.168em, -0.53em); top: -1.54em; left: 0.615em;"><span id="MathJax-Span-95" class="texatom"><span id="MathJax-Span-96" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-97" class="mi">c</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-98" class="mi">p</span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-99" class="mn">936</span></span></span><span style="display: inline-block; width: 0px; height: 1.846em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.985em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.728em; vertical-align: -0.632em;"></span></span></nobr></span><script id="MathJax-Element-11" type="math/tex">\varphi_{cp936}^{-1}</script>作用于<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-12-Frame" class="MathJax"><nobr><span id="MathJax-Span-100" class="math"><span style="display: inline-block; position: relative; width: 66px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.181em, 1000em, 2.791em, -0.504em); top: -2.215em; left: 0em;"><span id="MathJax-Span-101" class="mrow"><span id="MathJax-Span-102" class="msubsup"><span style="display: inline-block; position: relative; width: 2.475em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-103" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -1.593em; left: 0.615em;"><span id="MathJax-Span-104" class="texatom"><span id="MathJax-Span-105" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-106" class="mi">c</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-107" class="mi">p</span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-108" class="mn">936</span></span></span><span style="display: inline-block; width: 0px; height: 1.846em;"></span></span></span></span><span id="MathJax-Span-109" class="mfenced"><span style="vertical-align: 0em;" id="MathJax-Span-110" class="mo"><span style="font-family: MathJax_Size1;">(</span></span><span id="MathJax-Span-111" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-112" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.148em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-113" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span><span style="vertical-align: 0em;" id="MathJax-Span-114" class="mo"><span style="font-family: MathJax_Size1;">)</span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.215em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.704em; vertical-align: -0.565em;"></span></span></nobr></span><script id="MathJax-Element-12" type="math/tex">\varphi_{cp936} \left( s’ \right)</script>，得到<span class="MathJax_Preview"></span><div style="text-align: center;" aria-readonly="true" role="textbox" class="MathJax_Display"><span style="" id="MathJax-Element-13-Frame" class="MathJax"><nobr><span id="MathJax-Span-115" class="math"><span style="display: inline-block; position: relative; width: 159px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.304em, 1000em, 2.967em, -0.504em); top: -2.338em; left: 0em;"><span id="MathJax-Span-116" class="mrow"><span id="MathJax-Span-117" class="msubsup"><span style="display: inline-block; position: relative; width: 2.475em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-118" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; clip: rect(1.129em, 1000em, 1.969em, -0.494em); top: -2.129em; left: 0.615em;"><span id="MathJax-Span-119" class="texatom"><span id="MathJax-Span-120" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-121" class="mo">−</span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-122" class="mn">1</span></span></span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span><span style="position: absolute; clip: rect(1.191em, 1000em, 2.168em, -0.53em); top: -1.54em; left: 0.615em;"><span id="MathJax-Span-123" class="texatom"><span id="MathJax-Span-124" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-125" class="mi">c</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-126" class="mi">p</span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-127" class="mn">936</span></span></span><span style="display: inline-block; width: 0px; height: 1.846em;"></span></span></span></span><span style="font-family: MathJax_Main; padding-left: 0.222em;" id="MathJax-Span-128" class="mo">∘</span><span style="padding-left: 0.222em;" id="MathJax-Span-129" class="msubsup"><span style="display: inline-block; position: relative; width: 2.475em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-130" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -1.593em; left: 0.615em;"><span id="MathJax-Span-131" class="texatom"><span id="MathJax-Span-132" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-133" class="mi">c</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-134" class="mi">p</span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-135" class="mn">936</span></span></span><span style="display: inline-block; width: 0px; height: 1.846em;"></span></span></span></span><span id="MathJax-Span-136" class="mfenced"><span style="vertical-align: 0em;" id="MathJax-Span-137" class="mo"><span style="font-family: MathJax_Size1;">(</span></span><span id="MathJax-Span-138" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-139" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.198em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-140" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span><span style="vertical-align: 0em;" id="MathJax-Span-141" class="mo"><span style="font-family: MathJax_Size1;">)</span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span></span><span style="font-family: MathJax_Main; padding-left: 0.278em;" id="MathJax-Span-142" class="mo">=</span><span style="padding-left: 0.278em;" id="MathJax-Span-143" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-144" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.198em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-145" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span><span style="font-family: MathJax_Main;" id="MathJax-Span-146" class="mo">;</span></span><span style="display: inline-block; width: 0px; height: 2.338em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.77em; vertical-align: -0.632em;"></span></span></nobr></span></div><script id="MathJax-Element-13" type="math/tex; mode=display">\varphi_{cp936}^{-1} \circ \varphi_{cp936} \left( s' \right) = s';</script></li>
<li>内核通过utf8或iocharset=utf8选项，将映射<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-14-Frame" class="MathJax"><nobr><span id="MathJax-Span-147" class="math"><span style="display: inline-block; position: relative; width: 32px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(0.358em, 1000em, 1.568em, -0.504em); top: -0.985em; left: 0em;"><span id="MathJax-Span-148" class="mrow"><span id="MathJax-Span-149" class="msubsup"><span style="display: inline-block; position: relative; width: 1.983em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-150" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -1.593em; left: 0.615em;"><span id="MathJax-Span-151" class="texatom"><span id="MathJax-Span-152" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-153" class="mi">u</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-154" class="mi">t</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-155" class="mi">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-156" class="mn">8</span></span></span><span style="display: inline-block; width: 0px; height: 1.846em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.985em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.204em; vertical-align: -0.575em;"></span></span></nobr></span><script id="MathJax-Element-14" type="math/tex">\varphi_{utf8}</script>作用于<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-15-Frame" class="MathJax"><nobr><span id="MathJax-Span-157" class="math"><span style="display: inline-block; position: relative; width: 27px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.333em, 1000em, 2.656em, -0.501em); top: -2.277em; left: 0em;"><span id="MathJax-Span-158" class="mrow"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-159" class="mi">s</span><span style="font-family: MathJax_Main;" id="MathJax-Span-160" class="mo">,</span><span style="padding-left: 0.167em;" id="MathJax-Span-161" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-162" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.148em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-163" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.277em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.345em; vertical-align: -0.319em;"></span></span></nobr></span><script id="MathJax-Element-15" type="math/tex">s, s’</script>，最终向应用程序输出<span class="MathJax_Preview"></span><div style="text-align: center;" aria-readonly="true" role="textbox" class="MathJax_Display"><span style="" id="MathJax-Element-16-Frame" class="MathJax"><nobr><span id="MathJax-Span-164" class="math"><span style="display: inline-block; position: relative; width: 121px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.304em, 1000em, 2.921em, -0.504em); top: -2.338em; left: 0em;"><span id="MathJax-Span-165" class="mrow"><span id="MathJax-Span-166" class="msubsup"><span style="display: inline-block; position: relative; width: 1.983em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-167" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -1.593em; left: 0.615em;"><span id="MathJax-Span-168" class="texatom"><span id="MathJax-Span-169" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-170" class="mi">u</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-171" class="mi">t</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-172" class="mi">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-173" class="mn">8</span></span></span><span style="display: inline-block; width: 0px; height: 1.846em;"></span></span></span></span><span id="MathJax-Span-174" class="mfenced"><span style="vertical-align: 0em;" id="MathJax-Span-175" class="mo"><span style="font-family: MathJax_Size1;">(</span></span><span id="MathJax-Span-176" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-177" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.198em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-178" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span><span style="vertical-align: 0em;" id="MathJax-Span-179" class="mo"><span style="font-family: MathJax_Size1;">)</span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.849em; vertical-align: 0em;"></span></span><span style="font-family: MathJax_Main;" id="MathJax-Span-180" class="mo">,</span><span style="padding-left: 0.167em;" id="MathJax-Span-181" class="msubsup"><span style="display: inline-block; position: relative; width: 1.983em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-182" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -1.593em; left: 0.615em;"><span id="MathJax-Span-183" class="texatom"><span id="MathJax-Span-184" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-185" class="mi">u</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-186" class="mi">t</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-187" class="mi">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-188" class="mn">8</span></span></span><span style="display: inline-block; width: 0px; height: 1.846em;"></span></span></span></span><span id="MathJax-Span-189" class="mfenced"><span style="" id="MathJax-Span-190" class="mo"><span style="font-family: MathJax_Main;">(</span></span><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-191" class="mi">s</span><span style="" id="MathJax-Span-192" class="mo"><span style="font-family: MathJax_Main;">)</span></span></span><span style="font-family: MathJax_Main;" id="MathJax-Span-193" class="mo">;</span></span><span style="display: inline-block; width: 0px; height: 2.338em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.714em; vertical-align: -0.575em;"></span></span></nobr></span></div><script id="MathJax-Element-16" type="math/tex; mode=display">\varphi_{utf8} \left( s' \right), \varphi_{utf8} \left( s \right);</script></li>
<li>应用程序（如ls、nautilus）通过locale的设置，将<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-17-Frame" class="MathJax"><nobr><span id="MathJax-Span-194" class="math"><span style="display: inline-block; position: relative; width: 32px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(-0.015em, 1000em, 1.648em, -0.504em); top: -0.985em; left: 0em;"><span id="MathJax-Span-195" class="mrow"><span id="MathJax-Span-196" class="msubsup"><span style="display: inline-block; position: relative; width: 1.983em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.556em, -0.504em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-197" class="mi">φ</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; clip: rect(1.129em, 1000em, 1.969em, -0.494em); top: -2.129em; left: 0.615em;"><span id="MathJax-Span-198" class="texatom"><span id="MathJax-Span-199" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-200" class="mo">−</span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-201" class="mn">1</span></span></span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span><span style="position: absolute; clip: rect(1.163em, 1000em, 2.176em, -0.539em); top: -1.512em; left: 0.615em;"><span id="MathJax-Span-202" class="texatom"><span id="MathJax-Span-203" class="mrow"><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-204" class="mi">u</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-205" class="mi">t</span><span style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-206" class="mi">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-207" class="mn">8</span></span></span><span style="display: inline-block; width: 0px; height: 1.846em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.985em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.772em; vertical-align: -0.676em;"></span></span></nobr></span><script id="MathJax-Element-17" type="math/tex">\varphi_{utf8}^{-1}</script>作用于内核输出，得到我们所看见的字符串<span class="MathJax_Preview"></span><span style="" aria-readonly="true" role="textbox" id="MathJax-Element-18-Frame" class="MathJax"><nobr><span id="MathJax-Span-208" class="math"><span style="display: inline-block; position: relative; width: 27px; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.333em, 1000em, 2.656em, -0.501em); top: -2.277em; left: 0em;"><span id="MathJax-Span-209" class="mrow"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-210" class="mi">s</span><span style="font-family: MathJax_Main;" id="MathJax-Span-211" class="mo">,</span><span style="padding-left: 0.167em;" id="MathJax-Span-212" class="msup"><span style="display: inline-block; position: relative; width: 0.752em; height: 0px;"><span style="position: absolute; clip: rect(1.527em, 1000em, 2.348em, -0.501em); top: -2.154em; left: 0em;"><span style="font-family: MathJax_Math; font-style: italic;" id="MathJax-Span-213" class="mi">s</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; top: -2.148em; left: 0.492em;"><span style="font-size: 70.7%; font-family: MathJax_Main;" id="MathJax-Span-214" class="mo">′</span><span style="display: inline-block; width: 0px; height: 1.785em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.277em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.345em; vertical-align: -0.319em;"></span></span></nobr></span><script id="MathJax-Element-18" type="math/tex">s,s’</script>.</li>
</ol>
					</div><!-- END entry -->
		<div class="add-info">
					</div>
		<div class="post-info-bottom">
			<span class="post-info-category"><a href="http://gosubi.me/adow/category/rational/floss/" title="查看 FLOSS 中的全部文章" rel="category tag">FLOSS</a></span><span class="post-info-tags"><a href="http://gosubi.me/adow/tag/i18n/" rel="tag">i18n</a></span>
		</div>
		<div id="nav-below">
			<div class="nav-previous"><a href="http://gosubi.me/adow/2008/08/charset-coding-1-formalizaion/" rel="prev"><span class="meta-nav">←</span> 字符集和编码 I：formalization</a></div>
			<div class="nav-next"><a href="http://gosubi.me/adow/2008/08/charset-coding-3-cifs/" rel="next">字符集和编码III: tricky cifs <span class="meta-nav">→</span></a></div>
		</div><!-- #nav-below -->					
	</div><!-- END post -->
	<!-- You can start editing here. -->

			<div id="comments-div"><span id="comments-addcomment"><a href="#respond" rel="nofollow" title="发表评论？">发表评论？</a></span><h2 id="comments">6 条评论。</h2></div>
		<ol class="commentlist" id="thecomments">
				
<li class="pingback even thread-even depth-1" id="li-comment-594">
	<div id="comment-594">
		<div class="comment-author vcard pingback">
			<cite class="fn zbench_pingback"><a href="http://closefoot.com/?p=200" rel="external nofollow" class="url">smbfs/cifs</a> - pingback on 2013-01-31 在 15:10</cite>
		</div>
	</div>
</li>

<li class="pingback odd alt thread-odd thread-alt depth-1" id="li-comment-585">
	<div id="comment-585">
		<div class="comment-author vcard pingback">
			<cite class="fn zbench_pingback"><a href="http://gosubi.me/adow/2007/05/smbfs-cifs/" rel="external nofollow" class="url">五一的破事：smbfs/cifs | I remember a meadow one morning in May</a> - pingback on 2012-12-14 在 11:54</cite>
		</div>
	</div>
</li>

<li class="comment even thread-even depth-1" id="li-comment-583">
	<div id="comment-583">
		<div class="comment-author vcard">
			<img alt="" src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/51c41f05ce581e3a23d37f8536cf18ce_002.png" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn"><a href="http://www.dylanninin.com/" rel="external nofollow" class="url">dylanninin</a></cite>
			<span class="comment-meta commentmetadata"><a href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/comment-page-1/#comment-583">2012-12-12 在 17:10</a></span>
		</div>
		<div class="comment-text">
			<p> <img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_biggrin.gif" alt=":grin:" class="wp-smiley"><br>
遇到一例samba服务器之间传送文件的乱码现象，两边的编码不一致导致。感谢你的无聊还可以帮助解决一些人的问题！</p>
					</div>
		<div class="reply">
			<a class="comment-reply-link" href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/?replytocom=583#respond" onclick='return addComment.moveForm("comment-583", "583", "respond", "75")'>回复</a>		</div>
	</div>

<ul class="children">

<li class="comment byuser comment-author-subi bypostauthor odd alt depth-2" id="li-comment-584">
	<div id="comment-584">
		<div class="comment-author vcard">
			<img alt="" src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/9ff7cb5745f29fde88c5b51183bea730_002.jpg" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">subi</cite>
			<span class="comment-meta commentmetadata"><a href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/comment-page-1/#comment-584">2012-12-14 在 10:42</a></span>
		</div>
		<div class="comment-text">
			<p>有用就好～～</p>
<p>主要是服务器上同时有gbk和utf8的文件名，这真的蛋疼！</p>
					</div>
		<div class="reply">
			<a class="comment-reply-link" href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/?replytocom=584#respond" onclick='return addComment.moveForm("comment-584", "584", "respond", "75")'>回复</a>		</div>
	</div>

</li>
</ul>
</li>

<li class="comment even thread-odd thread-alt depth-1" id="li-comment-262">
	<div id="comment-262">
		<div class="comment-author vcard">
			<img alt="" src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/80b40550a2e8d29137eba3c0d1b6f9ff.png" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn"><a href="http://www.evqurp.com/" rel="external nofollow" class="url">科士威</a></cite>
			<span class="comment-meta commentmetadata"><a href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/comment-page-1/#comment-262">2010-06-18 在 23:21</a></span>
		</div>
		<div class="comment-text">
			<p><a href="http://www.evqurp.com/" rel="nofollow" class="liexternal">科士威</a>顶这个好贴~~~~我的网站是<a href="http://www.evqurp.com/" rel="nofollow" class="liexternal">http://www.evqurp.com</a>,欢迎大家来我共创事业！</p>
					</div>
		<div class="reply">
			<a class="comment-reply-link" href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/?replytocom=262#respond" onclick='return addComment.moveForm("comment-262", "262", "respond", "75")'>回复</a>		</div>
	</div>

</li>

<li class="pingback odd alt thread-even depth-1" id="li-comment-212">
	<div id="comment-212">
		<div class="comment-author vcard pingback">
			<cite class="fn zbench_pingback"><a href="http://gosubi.me/adow/archives/94" rel="external nofollow" class="url">五一的破事：smbfs/cifs | I remember a meadow one morning in May</a> - pingback on 2009-12-18 在 17:40</cite>
		</div>
	</div>
</li>
		</ol>
		<div class="navigation"></div>
	
	<script type="text/javascript">
	/* <![CDATA[ */
		function grin(tag) {
			var myField;
			tag = ' ' + tag + ' ';
			if (document.getElementById('comment') && document.getElementById('comment').type == 'textarea') {
				myField = document.getElementById('comment');
			} else {
				return false;
			}
			if (document.selection) {
				myField.focus();
				sel = document.selection.createRange();
				sel.text = tag;
				myField.focus();
			}
			else if (myField.selectionStart || myField.selectionStart == '0') {
				var startPos = myField.selectionStart;
				var endPos = myField.selectionEnd;
				var cursorPos = endPos;
				myField.value = myField.value.substring(0, startPos)
							  + tag
							  + myField.value.substring(endPos, myField.value.length);
				cursorPos += tag.length;
				myField.focus();
				myField.selectionStart = cursorPos;
				myField.selectionEnd = cursorPos;
			}
			else {
				myField.value += tag;
				myField.focus();
			}
		}
	/* ]]> */
	</script>
									<div id="respond">
				<h3 id="reply-title">发表评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/#respond" style="display:none;"><small>取消回复</small></a></small></h3>
									<form action="http://gosubi.me/adow/wp-comments-post.php" method="post" id="commentform">
																										<p class="comment-form-author"><input id="author" name="author" size="30" type="text"> <label for="author"><small>昵称</small></label></p>
<p class="comment-form-email"><input id="email" name="email" size="30" type="text"> <label for="email">邮箱</label></p>
<p class="comment-form-url"><input id="url" name="url" size="30" type="text"> <label for="url">网址</label></p>
												<p class="smilies">
	<a href="javascript:grin(':?:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_question.gif" alt=""></a>
	<a href="javascript:grin(':razz:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_razz.gif" alt=""></a>
	<a href="javascript:grin(':sad:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_sad.gif" alt=""></a>
	<a href="javascript:grin(':evil:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_evil.gif" alt=""></a>
	<a href="javascript:grin(':!:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_exclaim.gif" alt=""></a>
	<a href="javascript:grin(':smile:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_smile.gif" alt=""></a>
	<a href="javascript:grin(':oops:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_redface.gif" alt=""></a>
	<a href="javascript:grin(':grin:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_biggrin.gif" alt=""></a>
	<a href="javascript:grin(':eek:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_surprised.gif" alt=""></a>
	<a href="javascript:grin(':shock:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_eek.gif" alt=""></a>
	<a href="javascript:grin(':???:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_confused.gif" alt=""></a>
	<a href="javascript:grin(':cool:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_cool.gif" alt=""></a>
	<a href="javascript:grin(':lol:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_lol.gif" alt=""></a>
	<a href="javascript:grin(':mad:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_mad.gif" alt=""></a>
	<a href="javascript:grin(':twisted:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_twisted.gif" alt=""></a>
	<a href="javascript:grin(':roll:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_rolleyes.gif" alt=""></a>
	<a href="javascript:grin(':wink:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_wink.gif" alt=""></a>
	<a href="javascript:grin(':idea:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_idea.gif" alt=""></a>
	<a href="javascript:grin(':arrow:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_arrow.gif" alt=""></a>
	<a href="javascript:grin(':neutral:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_neutral.gif" alt=""></a>
	<a href="javascript:grin(':cry:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_cry.gif" alt=""></a>
	<a href="javascript:grin(':mrgreen:')"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_mrgreen.gif" alt=""></a>
	<br></p><p class="comment-form-comment"><textarea aria-required="true" rows="8" cols="45" name="comment" id="comment" onkeydown="if(event.ctrlKey){if(event.keyCode==13){document.getElementById('submit').click();return false}};"></textarea></p>						<p class="comment-note">注意 - 你可以用以下 <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:<br> <code>&lt;a
 href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; 
&lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del 
datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;strike&gt; 
&lt;strong&gt; &lt;pre lang="" line="" escaped="" cssfile=""&gt; </code></p>						<p class="form-submit">
							<input name="submit" id="submit" value="提交" type="submit">
							<input name="comment_post_ID" value="75" id="comment_post_ID" type="hidden">
<input name="comment_parent" id="comment_parent" value="0" type="hidden">
						</p>
						<p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" value="25663348ec" type="hidden"></p>					</form>
							</div><!-- #respond -->
								<div class="trackbacks-pingbacks">
			<h3>Trackbacks and Pingbacks:</h3>
			<ul id="pinglist">
				    <li id="comment-594">
        <a href="http://closefoot.com/?p=200" rel="external nofollow" class="url">smbfs/cifs</a> - Pingback on 2013/01/31/ 15:10</li>
    <li id="comment-585">
        <a href="http://gosubi.me/adow/2007/05/smbfs-cifs/" rel="external nofollow" class="url">五一的破事：smbfs/cifs | I remember a meadow one morning in May</a> - Pingback on 2012/12/14/ 11:54</li>
    <li id="comment-212">
        <a href="http://gosubi.me/adow/archives/94" rel="external nofollow" class="url">五一的破事：smbfs/cifs | I remember a meadow one morning in May</a> - Pingback on 2009/12/18/ 17:40</li>
			</ul>
		</div>
	</div><!--content-->
<div id="sidebar-border">
	<div id="rss_border">
		<div class="rss_border">
			<div id="rss_wrap">
				<div class="rss_wrap">
										<a class="rss " href="http://gosubi.me/adow/feed/" rel="bookmark" title="RSS 订阅">RSS 订阅</a>
										<a class="twitter" href="https://twitter.com/#%21/gosubi" rel="author" title="Follow me on twitter.">Follow me on twitter.</a>
															<a class="facebook" href="http://www.facebook.com/profile.php?id=1019192490" rel="author" title="Facebook">Facebook</a>
																								</div>
			</div>
		</div>
	</div>
	<div id="sidebar">

<div id="recentcomments" class="widget widget_recentcomments"><h3 class="widgettitle">最新评论</h3><ul style="cursor: auto;"><li id="rc-comment-584" class="rc-item rc-comment rc-clearfix"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/9ff7cb5745f29fde88c5b51183bea730.jpg" alt="" class="rc-avatar rc-left" height="16" width="16"><div class="rc-info"><span class="rc-reviewer">subi</span> 在 <a class="rc-post" rel="nofollow" href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/#comment-584">字符集和编码II: fat/msdos/vfat</a></div><div class="rc-timestamp"></div><div class="rc-excerpt">有用就好～～主要是服务器上同时有<span class="rc-ellipsis">...</span></div></li><li id="rc-comment-583" class="rc-item rc-comment rc-clearfix"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/51c41f05ce581e3a23d37f8536cf18ce.png" alt="" class="rc-avatar rc-left" height="16" width="16"><div class="rc-info"><a class="rc-reviewer" rel="nofollow external" href="http://www.dylanninin.com/">dylanninin</a> 在 <a class="rc-post" rel="nofollow" href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/#comment-583">字符集和编码II: fat/msdos/vfat</a></div><div class="rc-timestamp"></div><div class="rc-excerpt"> <img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/icon_biggrin.gif" alt=":grin:" class="wp-smiley">  遇到一例samba<span class="rc-ellipsis">...</span></div></li><li id="rc-comment-582" class="rc-item rc-comment rc-clearfix"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/9ff7cb5745f29fde88c5b51183bea730.jpg" alt="" class="rc-avatar rc-left" height="16" width="16"><div class="rc-info"><span class="rc-reviewer">subi</span> 在 <a class="rc-post" rel="nofollow" href="http://gosubi.me/adow/mplayer-wrapper/python-version/#comment-582">mplayer-wrapper (python)</a></div><div class="rc-timestamp"></div><div class="rc-excerpt">写个脚本吧#!/bin/bash<span class="rc-ellipsis">...</span></div></li><li id="rc-comment-581" class="rc-item rc-comment rc-clearfix"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/b1b9934d5807bf2e71721ab98a2b5e1d.png" alt="" class="rc-avatar rc-left" height="16" width="16"><div class="rc-info"><a class="rc-reviewer" rel="nofollow external" href="http://e/">eric</a> 在 <a class="rc-post" rel="nofollow" href="http://gosubi.me/adow/mplayer-wrapper/python-version/#comment-581">mplayer-wrapper (python)</a></div><div class="rc-timestamp"></div><div class="rc-excerpt">成功了，非常感谢root@Yao<span class="rc-ellipsis">...</span></div></li><li id="rc-comment-580" class="rc-item rc-comment rc-clearfix"><img src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/9ff7cb5745f29fde88c5b51183bea730.jpg" alt="" class="rc-avatar rc-left" height="16" width="16"><div class="rc-info"><span class="rc-reviewer">subi</span> 在 <a class="rc-post" rel="nofollow" href="http://gosubi.me/adow/mplayer-wrapper/python-version/#comment-580">mplayer-wrapper (python)</a></div><div class="rc-timestamp"></div><div class="rc-excerpt">我这里试了，可以下载debug时<span class="rc-ellipsis">...</span></div></li><li class="rc-navi rc-clearfix"><a "rel="nofollow&quot;" class="rc-older">下一页 »</a></li></ul></div><div id="tag_cloud-6" class="widget widget_tag_cloud"><h3 class="widgettitle">标签</h3><div class="tagcloud"><a href="http://gosubi.me/adow/tag/acg/" class="tag-link-29" title="2 个话题" style="font-size: 9.92366412214pt;">ACG</a>
<a href="http://gosubi.me/adow/tag/ballroom/" class="tag-link-35" title="40 个话题" style="font-size: 22pt;">Ballroom</a>
<a href="http://gosubi.me/adow/tag/bluehost/" class="tag-link-40" title="1 个话题" style="font-size: 8pt;">Bluehost</a>
<a href="http://gosubi.me/adow/tag/cvpr/" class="tag-link-24" title="3 个话题" style="font-size: 11.2061068702pt;">CVPR</a>
<a href="http://gosubi.me/adow/tag/emacs/" class="tag-link-37" title="8 个话题" style="font-size: 14.9465648855pt;">Emacs</a>
<a href="http://gosubi.me/adow/tag/fun/" class="tag-link-33" title="1 个话题" style="font-size: 8pt;">Fun</a>
<a href="http://gosubi.me/adow/tag/gentoo/" class="tag-link-18" title="3 个话题" style="font-size: 11.2061068702pt;">Gentoo</a>
<a href="http://gosubi.me/adow/tag/gnulinux/" class="tag-link-20" title="6 个话题" style="font-size: 13.8778625954pt;">GNU/Linux</a>
<a href="http://gosubi.me/adow/tag/gossip/" class="tag-link-38" title="11 个话题" style="font-size: 16.3358778626pt;">Gossip</a>
<a href="http://gosubi.me/adow/tag/i18n/" class="tag-link-36" title="3 个话题" style="font-size: 11.2061068702pt;">i18n</a>
<a href="http://gosubi.me/adow/tag/liveusb/" class="tag-link-49" title="1 个话题" style="font-size: 8pt;">liveusb</a>
<a href="http://gosubi.me/adow/tag/mplayer/" class="tag-link-41" title="5 个话题" style="font-size: 13.1297709924pt;">mplayer</a>
<a href="http://gosubi.me/adow/tag/rant/" class="tag-link-42" title="9 个话题" style="font-size: 15.4809160305pt;">Rant</a>
<a href="http://gosubi.me/adow/tag/subbus/" class="tag-link-44" title="1 个话题" style="font-size: 8pt;">subbus</a>
<a href="http://gosubi.me/adow/tag/travel/" class="tag-link-30" title="7 个话题" style="font-size: 14.4122137405pt;">Travel</a>
<a href="http://gosubi.me/adow/tag/vim/" class="tag-link-15" title="2 个话题" style="font-size: 9.92366412214pt;">Vim</a>
<a href="http://gosubi.me/adow/tag/windows/" class="tag-link-48" title="1 个话题" style="font-size: 8pt;">windows</a>
<a href="http://gosubi.me/adow/tag/wow/" class="tag-link-9" title="1 个话题" style="font-size: 8pt;">WoW</a>
<a href="http://gosubi.me/adow/tag/pal/" class="tag-link-25" title="1 个话题" style="font-size: 8pt;">御剑江湖</a>
<a href="http://gosubi.me/adow/tag/pku/" class="tag-link-10" title="10 个话题" style="font-size: 15.9083969466pt;">未名湖是个海洋</a></div>
</div><div id="categories-2" class="widget widget_categories"><h3 class="widgettitle">分类目录</h3>		<ul>
	<li class="cat-item cat-item-13"><a href="http://gosubi.me/adow/category/reprint/" title="查看 它山攻玉 下的所有文章">它山攻玉</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://gosubi.me/adow/category/feelings/" title="牢骚太盛防断肠">上善若水</a>
<ul class="children">
	<li class="cat-item cat-item-6"><a href="http://gosubi.me/adow/category/feelings/beloved/" title="查看 青青子衿 下的所有文章">青青子衿</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://gosubi.me/adow/category/feelings/memories/" title="查看 朝花夕拾 下的所有文章">朝花夕拾</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-22"><a href="http://gosubi.me/adow/category/arts/" title="查看 闲情逸致 下的所有文章">闲情逸致</a>
<ul class="children">
	<li class="cat-item cat-item-5"><a href="http://gosubi.me/adow/category/arts/games/" title="查看 庄周晓梦 下的所有文章">庄周晓梦</a>
</li>
	<li class="cat-item cat-item-16"><a href="http://gosubi.me/adow/category/arts/reading/" title="查看 开卷有益 下的所有文章">开卷有益</a>
</li>
	<li class="cat-item cat-item-17"><a href="http://gosubi.me/adow/category/arts/movies/" title="查看 第七艺术 下的所有文章">第七艺术</a>
</li>
	<li class="cat-item cat-item-32"><a href="http://gosubi.me/adow/category/arts/skit/" title="查看 谐趣小品 下的所有文章">谐趣小品</a>
</li>
	<li class="cat-item cat-item-31"><a href="http://gosubi.me/adow/category/arts/dancing/" title="查看 舞之蹈之 下的所有文章">舞之蹈之</a>
</li>
	<li class="cat-item cat-item-26"><a href="http://gosubi.me/adow/category/arts/music/" title="查看 阳关三叠 下的所有文章">阳关三叠</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-14"><a href="http://gosubi.me/adow/category/rational/" title="查看 格物致知 下的所有文章">格物致知</a>
<ul class="children">
	<li class="cat-item cat-item-19"><a href="http://gosubi.me/adow/category/rational/floss/" title="查看 FLOSS 下的所有文章">FLOSS</a>
</li>
	<li class="cat-item cat-item-28"><a href="http://gosubi.me/adow/category/rational/hosting/" title="查看 此身何寄 下的所有文章">此身何寄</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://gosubi.me/adow/category/rational/research/" title="查看 术业有专攻 下的所有文章">术业有专攻</a>
</li>
</ul>
</li>
		</ul>
</div><div id="meta-4" class="widget widget_meta"><h3 class="widgettitle">功能</h3>			<ul>
			<li><a href="http://gosubi.me/adow/wp-login.php?action=register">注册</a></li>			<li><a href="http://gosubi.me/adow/wp-login.php">登录</a></li>
			<li><a href="http://gosubi.me/adow/feed/" title="使用 RSS 2.0 订阅本站点内容">文章 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://gosubi.me/adow/comments/feed/" title="使用 RSS 订阅本站点的所有文章的近期评论">评论 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://cn.wordpress.org/" title="基于 WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>
						</ul>
</div>

	</div><!-- end: #sidebar -->
</div><!-- end: #sidebar-border --></div><!--wrapper-->
<div class="clear"></div>
<div id="footer">
	<div id="footer-inside">
		<p>
			版权所有 © 2013 I remember a meadow one morning in May			| Powered by <a href="http://wordpress.org/">WordPress</a> and <a href="http://zww.me/">zBench</a>
		</p>
		<span id="back-to-top">↑ <a href="#" rel="nofollow" title="Back to top">回到顶部</a></span>
	</div>
</div><!--footer-->
<style type="text/css">
p{margin-bottom:12px !important}
.entry > p ~ p,.entry li > p {text-indent:2em}
pre + p,p.no-indent {text-indent:0 !important}
.entry > p:first-child::first-letter{float:left;font-size:250%;font-weight:700;line-height:1em;margin-right:5px;margin-top:2px}
.entry th{background:#CAE8EA;border:0 1px 1px 1px;border-color:#C1DAD7;border-style:solid;color:#4f6b72;font:bold;letter-spacing:2px;padding:6px 6px 6px 12px;text-align:left;text-transform:uppercase}
.entry td{background:#fff;border-bottom:1px solid #C1DAD7;border-right:1px solid #C1DAD7;color:#4f6b72;font-size:11px;padding:6px 6px 6px 12px}
</style>

<script type="text/javascript">
jQuery(".wp-geshi").next("p").addClass("no-indent");
</script>

<script type="text/x-mathjax-config;executed=true">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
<script type="text/javascript" src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/MathJax.js">
</script><p><a onclick='document.cookie="wpmp_switcher=mobile;path=/;expires=Tue, 01-01-2030 00:00:00 GMT";' href="http://gosubi.me/adow/2008/08/charset-coding-2-vfat/?wpmp_switcher=mobile">Switch to our mobile site</a></p><script>
/* <![CDATA[ */
var rcGlobal = {
	serverUrl		:'http://gosubi.me/adow',
	infoTemp		:'%REVIEWER% 在 %POST%',
	loadingText		:'正在加载',
	noCommentsText	:'没有任何评论',
	newestText		:'&laquo; 最新的',
	newerText		:'&laquo; 上一页',
	olderText		:'下一页 &raquo;',
	showContent		:'1',
	external		:'1',
	avatarSize		:'16',
	avatarPosition	:'left',
	anonymous		:'匿名'
};
/* ]]> */
</script>
<script type="text/javascript" src="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81II%20fat_msdos_vfat_files/wp-recentcomments.js"></script>

<div style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px none; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-size-adjust: none; font-family: 'MathJax_Size1',sans-serif;" id="MathJax_Font_Test"></div><div style="display: block; background: none repeat scroll 0% 0% transparent; border-width: 0px; width: 300px; outline-width: 0px; z-index: 2147483647; height: 268px; position: fixed; bottom: 0px; right: 0px;"><iframe id="ep6yv526k2g" style="height: 100%; width: 100%; border-width: 0px; position: relative; transition-property: none; transition-duration: 0s; transition-timing-function: ease-in-out;" name="" frameborder="0" height="268" scrolling="no" width="300"></iframe></div></body></html>